(function(a){"use strict";var i=a.performance||a.webkitPerformance||a.msPerformance||a.mozPerformance||{};i.now=function(){return i.now||i.webkitNow||i.msNow||i.oNow||i.mozNow||function(){return(new Date).getTime()}}();var e={performance:i,ajaxs:[],param:{rate:.5,src:"http://localhost/tap/ajax/operate.php",download:{img:"http://h5dev.eclicks.cn/libs/common/img/bandwidth-5.png",size:4511798}}};if(a.primus.param){for(var t in a.primus.param){e.param[t]=a.primus.param[t]}}var s=e;var n=a.innerHeight;var r=a.document;a.onerror=function(e,t,n,a,r){var i=e;if(r&&r.stack){var o=r.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,"");var e=r.toString();if(o.indexOf(e)<0){o=e+"@"+o}i=o}var s={msg:i,target:t,rowNum:n,colNum:a};alert(s.msg)};var o=a.XMLHttpRequest;a.XMLHttpRequest=function(e){var t;t=new o(e);c(t);return t};var c=function(a){a.ajax={};a.addEventListener("readystatechange",function(){if(this.readyState==4){a.ajax.end=s.now();if(a.status>=200&&a.status<300||a.status==304){a.ajax.endBytes=m(a.responseText.length*2)}else{a.ajax.endBytes=0}a.ajax.interval=a.ajax.end-a.ajax.start;s.ajaxs.push(a.ajax)}},false);var r=a.open;a.open=function(e,t,n){a.ajax.type=e;a.ajax.url=t;return r.apply(a,arguments)};var n=a.send;a.send=function(e){a.ajax.start=s.now();var t=0;if(e){a.ajax.startBytes=m(JSON.stringify(e).length*2)}return n.apply(a,arguments)}};function m(e){return(e/1024).toFixed(2)}var u=0;function d(){var e=Date.now();e>u&&(u=e)}r.addEventListener("DOMContentLoaded",function(){var e=r.querySelectorAll("img");e=[].slice.call(r.querySelectorAll("img"));if(e){e.forEach(function(e){if(e.getBoundingClientRect().top>n){return}if(e.complete){d()}e.addEventListener("load",function(){d()},false)})}if(s.param.backgroundImages){s.param.backgroundImages.forEach(function(e){var t=new Image;t.src=e;if(t.complete){d()}t.onload=function(){d()}})}},false);a.addEventListener("load",function(){setTimeout(function(){var e=s.getTimes();var t={ajaxs:s.ajaxs,dpi:s.dpi(),time:e};s.send(t)},500)});s.print=function(e,t,n,a){var r=[],t=t||"",n=n||"";for(var i in e){if(a){if(a(e[i]))r.push(t+i+":"+e[i]+n)}else{r.push(t+i+":"+e[i]+n)}}return r};s.getTimes=function(){var e=i.timing;if(e===undefined){return false}var t={};if(e){var n=0;if(a.chrome&&a.chrome.loadTimes){n=a.chrome.loadTimes().firstPaintTime*1e3;t.firstPaintTime=n-a.chrome.loadTimes().startLoadTime*1e3}else if(typeof e.msFirstPaint==="number"){n=e.msFirstPaint;t.firstPaintTime=n-e.navigationStart}else{t.firstPaintTime=l-e.navigationStart}t.loadTime=e.loadEventEnd-e.navigationStart;t.unloadEventTime=e.unloadEventEnd-e.unloadEventStart;t.loadEventTime=e.loadEventEnd-e.loadEventStart;t.domReadyTime=e.domContentLoadedEventEnd-e.navigationStart;if(u==0){t.firstScreen=t.domReadyTime}else{t.firstScreen=u-e.navigationStart}t.parseDomTime=e.domComplete-e.domInteractive;t.initDomTreeTime=e.domInteractive-e.responseEnd;t.readyStart=e.fetchStart-e.navigationStart;t.redirectTime=e.redirectEnd-e.redirectStart;t.appcacheTime=e.domainLookupStart-e.fetchStart;t.lookupDomainTime=e.domainLookupEnd-e.domainLookupStart;t.connectTime=e.connectEnd-e.connectStart;t.requestTime=e.responseEnd-e.requestStart;t.requestDocumentTime=e.responseStart-e.requestStart;t.responseDocumentTime=e.responseEnd-e.responseStart;t.TTFB=e.responseStart-e.navigationStart}return t};var f={};s.mark=function(e){var t=i.now();f[e]={startTime:Date.now(),start:t,duration:0}};s.measure=function(e,t){var n=0,a=0;if(e in f){n=f[e].start}if(t in f){a=f[t].start}return{startTime:Date.now(),start:n,end:a,duration:a-n}};s.getEntries=function(){if(i.getEntries===undefined){return false}var e=i.getEntriesByType("resource");var r=[];e.forEach(function(e,t){var n=e.name.indexOf("http")===0;console.log(e.name);var a={name:e.name,fileName:e.name.split("/").pop(),duration:e.duration};if(e.requestStart){a.requestStartDelay=e.requestStart-e.startTime;a.lookupDomainTime=e.domainLookupEnd-e.domainLookupStart;a.connectTime=e.connectEnd-e.connectStart;a.TTFB=e.responseStart-e.startTime;a.requestTime=e.responseEnd-e.requestStart;a.requestDuration=e.responseStart-e.requestStart;a.redirectTime=e.redirectEnd-e.redirectStart}if(e.secureConnectionStart){a.ssl=e.connectEnd-e.secureConnectionStart}r.push(a)});return r};s.now=function(){return i.now()};s.network=function(){var e=a.navigator.connection||a.navigator.mozConnection||a.navigator.webkitConnection;var t="Unknown Ethernet WIFI 2G 3G 4G".split(" ");var n={bandwidth:null,type:null};if(e&&e.type){n.type=t[e.type]}return n};function p(){var i,o;var e=new Image;e.onload=function(){o=s.now();var e=(o-i)/1e3;var t=downloadSize*8;var n=(t/e).toFixed(2);var a=(n/1024).toFixed(2);var r=(a/1024).toFixed(2);console.log(r)};i=s.now();var t="?rand="+i;e.src=imageAddr+t}s.ua=function(){return USERAGENT.analyze(navigator.userAgent)};s.dpi=function(){return{width:a.screen.width,height:a.screen.height}};function v(e){return"data="+JSON.stringify(e)}s.send=function(e){var t=(new Date).getTime().toString();if(s.param.rate>Math.random(0,1)){var n=new Image(0,0);n.src=s.param.src+"?"+v(e)+"&ts="+t}};var l=Date.now();a.primus=s})(this);